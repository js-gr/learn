
<div class="cp_iptxt">
	<div id="problem"></div>
	<form onsubmit="return answer()">
	<label class="ef">
	<input type="text" placeholder="answer" id="answer-text">
	<input type="button" value="解答" onclick="answer();">
	</label>
	</form>
	<div id="explaination"></div>
</div>

<audio id="right_sound" src="./right.mp3"></audio>
<audio id="wrong_sound" src="./wrong.mp3"></audio>
<script>
    var problem = new Array(
      "答える",
      "考える",
      "火曜日"  
);
    var right = new Array(
      "answer",
      "think",
      "火曜日"
);
    var params = (new URL(document.location)).searchParams;
    var problem_num = params.get('p-num');
    var r_w = localStorage.getItem('r_w' + problem_num );
    /*if ( e_w == '1' ) {
	    
    } else { */
    document.getElementById('problem').innerHTML = '<h1>' + problem[problem_num] + '</h1>' ;
	    
    /*}*/
    function answer() {
	    const textbox = document.getElementById("answer-text")
	    const answer_text = textbox.value
            if ( answer_text == right[problem_num] ) {
		    document.getElementById('explaination').innerHTML = "正解" ;
		    const right_sound = document.querySelector("#right_sound");
		    right_sound.play();
		    r_next();
	    } else {
		    document.getElementById('explaination').innerHTML = "不正解<br>正解：" + right[problem_num] + '<br><input type="button" value="次へ" onclick="next();">' ;
		    const wrong_sound = document.querySelector("#wrong_sound");
		    wrong_sound.play();
		    
	    }
	    return false;
    }
    function r_next() {
	var params = (new URL(document.location)).searchParams;
	var url1 = parseFloat(params.get('p-num'))
        var url2 = url1 + 1 ;
	var url = 'https://js-gr.github.io/learn/tiping.html?p-num=' + url2 ;
	const _sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
	await _sleep(2000);
	location.href = url;
    }
    function next() {
	var params = (new URL(document.location)).searchParams;
	var url1 = parseFloat(params.get('p-num'))
        var url2 = url1 + 1 ;
	var url = 'https://js-gr.github.io/learn/tiping.html?p-num=' + url2 ;
	location.href = url;
    }
</script>
<style>
    .cp_iptxt {
	position: relative;
	width: 80%;
	margin: 40px 3%;
}
.cp_iptxt input[type='text'] {
	font: 15px/24px sans-serif;
	box-sizing: border-box;
	width: 100%;
	padding: 0.3em;
	transition: 0.3s;
	letter-spacing: 1px;
	color: black;
	border: 1px solid #1b2538;
	border-radius: 4px;
}
.ef input[type='text']:focus {
	border: 1px solid #da3c41;
	outline: none;
	box-shadow: 0 0 5px 1px rgba(218,60,65, .5);
}
</style>
